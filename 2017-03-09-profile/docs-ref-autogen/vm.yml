### YamlMime:UniversalReference
items:
- uid: az_vm
  name: az vm
  summary: Provision Linux or Windows virtual machines in seconds.
  langs:
  - azurecli
  children:
  - az_vm_assign_identity
  - az_vm_capture
  - az_vm_create
  - az_vm_deallocate
  - az_vm_delete
  - az_vm_format_secret
  - az_vm_generalize
  - az_vm_get_instance_view
  - az_vm_list
  - az_vm_list_ip_addresses
  - az_vm_list_sizes
  - az_vm_list_usage
  - az_vm_list_vm_resize_options
  - az_vm_open_port
  - az_vm_redeploy
  - az_vm_resize
  - az_vm_restart
  - az_vm_show
  - az_vm_start
  - az_vm_stop
  - az_vm_update
  - az_vm_wait
- uid: az_vm_assign_identity
  name: az vm assign-identity
  summary: Enable managed service identity on a VM.
  langs:
  - azurecli
  examples:
  - summary: Enable identity on a VM. It will have a role of 'Reader' to the VM's resource group
    syntax:
      content: az vm assign-identity -g MyResourceGroup -n MyVm --role Reader
  parameters:
  - isRequired: true
    name: --name -n
    summary: The name of the Virtual Machine. You can configure the default using az configure --defaults vm=<name>.
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using az configure --defaults group=<name>.
  - name: --port
    summary: 'The port to fetch AAD token. Default: 50342.'
  - name: --role
    defaultValue: Contributor
    summary: Role name or id the managed identity will be assigned.
  - name: --scope
    summary: "The scope the managed identity has access to, or specify  for None. Default: VM/VMSS's resource group."
  source:
    path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
    remote:
      branch: master
      path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
      repo: https://github.com/Azure/azure-cli.git
- uid: az_vm_capture
  name: az vm capture
  summary: Captures the VM by copying virtual hard disks of the VM and outputs a template that can be used to create similar VMs.
  langs:
  - azurecli
  examples:
  - summary: Process to deallocate, generalize, and capture a stopped virtual machine
    syntax:
      content: >-
        az vm deallocate -g MyResourceGroup -n MyVm
                                az vm generalize -g MyResourceGroup -n MyVm
                                az vm capture -g MyResourceGroup -n MyVm --vhd-name-prefix MyPrefix
  - summary: The process to deallocate, generalize, and capture multiple stopped virtual machines.
    syntax:
      content: >-
        vms_ids=$(az vm list -g MyResourceGroup --query "[].id" -o tsv)
                                az vm deallocate --ids ${vms_ids}
                                az vm generalize --ids ${vms_ids}
                                az vm capture --ids ${vms_ids} --vhd-name-prefix MyPrefix
  parameters:
  - isRequired: true
    name: --name -n
    summary: The name of the Virtual Machine. You can configure the default using az configure --defaults vm=<name>.
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using az configure --defaults group=<name>.
  - isRequired: true
    name: --vhd-name-prefix
    summary: The VHD name prefix specify for the VM disks.
  - name: --overwrite
    defaultValue: "True"
    summary: Overwrite the existing disk file.
  - name: --storage-container
    defaultValue: vhds
    summary: The storage account container name to save the disks.
  source:
    path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
    remote:
      branch: master
      path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
      repo: https://github.com/Azure/azure-cli.git
- uid: az_vm_create
  name: az vm create
  summary: Create an Azure Virtual Machine.
  langs:
  - azurecli
  examples:
  - summary: Create a simple Ubuntu VM with automatic SSH authentication.
    syntax:
      content: az vm create -n MyVm -g MyResourceGroup --image UbuntuLTS
  - summary: Create a simple Windows Server VM with a private IP address.
    syntax:
      content: >-
        az vm create -n MyVm -g MyResourceGroup
                                 --public-ip-address "" --image Win2012R2Datacenter
  - summary: Create a VM from a custom managed image (see `az image create` for generation information).
    syntax:
      content: az vm create -g MyResourceGroup -n MyVm --image MyImage
  - summary: Create a VM by attaching to a specialized managed operating system disk.
    syntax:
      content: az vm create -g MyResourceGroup -n MyVm --attach-os-disk MyOsDisk --os-type linux
  - summary: Create an Ubuntu Linux VM and provide a cloud-init script (https://docs.microsoft.com/azure/virtual-machines/virtual-machines-linux-using-cloud-init).
    syntax:
      content: az vm create -g MyResourceGroup -n MyVm --image debian --custom_data MyCloudInitScript.yml
  - summary: Create a Linux VM with SSH key authentication, add a public DNS entry, and then add it to an existing virtual network and availability set.
    syntax:
      content: az vm create -n MyVm -g MyResourceGroup --image <linux image from 'az vm image list'> --vnet-name MyVnet --subnet subnet1 --availability-set MyAvailabilitySet --public-ip-address-dns-name MyUniqueDnsName --ssh-key-value "<ssh-rsa-key, key-file-path or not specified for default-key-path>"
  - summary: Create a simple Ubuntu Linux VM with a public IP address, DNS entry, 2 data disk(10GB, 20GB), and then generate ssh key pairs under ~/.ssh.
    syntax:
      content: az vm create -n MyVm -g MyResourceGroup --public-ip-address-dns-name MyUniqueDnsName --image ubuntults --data-disk-sizes-gb 10 20 --size Standard_DS2_v2 --generate-ssh-keys
  - summary: Create an Debian VM and with Key Vault secrets. The secrets are placed in /var/lib/waagent and each certificate file is named with the hex thumbprint.
    syntax:
      content: "az keyvault certificate create --vault-name vaultname -n cert1   -p \"$(az keyvault certificate get-default-policy)\"\n                        \n                        secrets=$(az keyvault secret list-versions --vault-name vaultname   -n cert1 --query \"[?attributes.enabled].id\" -o tsv)\n                        \n                        vm_secrets=$(az vm format-secret -s \"$secrets\") \n                        \n                        az vm create -g group-name -n vm-name --admin-username deploy    --image debian --secrets \"$vm_secrets\""
  - summary: Create a VM with Managed Service Identity. The VM will have a 'Contributor' Role with access to the current resource group
    syntax:
      content: az vm create -n MyVm -g MyResourceGroup --assign-identity --image centos
  parameters:
  - isRequired: true
    name: --name -n
    summary: Name of the virtual machine.
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using az configure --defaults group=<name>.
  - name: --attach-data-disks
    summary: Attach existing data disks to the VM. Can use the name or ID of a managed disk or the URI to an unmanaged disk VHD.
  - name: --attach-os-disk
    summary: Attach an existing OS disk to the VM. Can use the name or ID of a managed disk or the URI to an unmanaged disk VHD.
  - name: --availability-set
    summary: Name or ID of an existing availability set to add the VM to. None by default.
  - name: --custom-data
    summary: Custom init script file or text (cloud-init, cloud-config, etc..).
  - name: --image
    summary: The name of the operating system image (URN alias, URN, Custom Image name or ID, or VHD Blob URI). In many cases, this parameter is required, but can be replaced by others (for example, --attach-os-disk).
    valueFrom: az vm image list, az vm image show
  - name: --license-type
    parameterValueGroup: Windows_Client, Windows_Server
    summary: License type if the Windows image or disk used was licensed on-premises.
  - name: --location -l
    summary: Location in which to create VM and related resources. If default location is not configured, will default to the resource group's location.
  - name: --no-wait
    summary: Do not wait for the long running operation to finish.
  - name: --secrets
    summary: 'One or many Key Vault secrets as JSON strings or files via @<file path> containing [{ "sourceVault": { "id": "value" }, "vaultCertificates": [{ "certificateUrl": "value", "certificateStore": "cert store name (only on windows)"}] }].'
  - name: --size
    defaultValue: Standard_DS1_v2
    summary: The VM size to be created. See <a href="https://azure.microsoft.com/en-us/pricing/details/virtual-machines/">https://azure.microsoft.com/en-us/pricing/details/virtual-machines/</a> for size info.
  - name: --tags
    summary: Space separated tags in 'key[=value]' format. Use "" to clear existing tags.
  - name: --validate
    summary: Generate and validate the ARM template without creating any resources.
  - name: --admin-password
    summary: Password for the VM if authentication type is 'Password'.
  - name: --admin-username
    defaultValue: appveyor
    summary: Username for the VM.
  - name: --authentication-type
    parameterValueGroup: password, ssh
    summary: Type of authentication to use with the VM. Defaults to password for Windows and SSH public key for Linux.
  - name: --generate-ssh-keys
    summary: Generate SSH public and private key files if missing. The keys will be stored in the ~/.ssh directory.
  - name: --ssh-dest-key-path
    summary: Destination file path on the VM for the SSH key.
  - name: --ssh-key-value
    summary: The SSH public key or public key file path.
  - name: --assign-identity
    summary: Enables the VM/VMSS to autonomously, using its own managed identity, to directly authenticate and interact with other Azure services using bearer tokens.
  - name: --role
    defaultValue: Contributor
    summary: Role name or id the managed identity will be assigned.
  - name: --scope
    summary: "The scope the managed identity has access to, or specify  for None. Default: VM/VMSS's resource group."
  - name: --nics
    summary: Names or IDs of existing NICs to attach to the VM. The first NIC will be designated as primary. If omitted, a new NIC will be created. If an existing NIC is specified, do not specify subnet, vnet, public IP or NSG.
  - name: --nsg
    summary: The name to use when creating a new Network Security Group (default) or referencing an existing one. Can also reference an existing NSG by ID or specify "" for none.
  - name: --nsg-rule
    parameterValueGroup: RDP, SSH
    summary: NSG rule to create when creating a new NSG. Defaults to open ports for allowing RDP on Windows and allowing SSH on Linux.
  - name: --private-ip-address
    summary: Static private IP address (e.g. 10.0.0.5).
  - name: --public-ip-address
    summary: Name of the public IP address when creating one (default) or referencing an existing one. Can also reference an existing public IP by ID or specify "" for None.
  - name: --public-ip-address-allocation
    defaultValue: dynamic
    parameterValueGroup: dynamic, static
    summary: ''
  - name: --public-ip-address-dns-name
    summary: Globally unique DNS name for a newly created Public IP.
  - name: --subnet
    summary: The name of the subnet when creating a new VNet or referencing an existing one. Can also reference an existing subnet by ID. If omitted, an appropriate VNet and subnet will be selected automatically, or a new one will be created.
  - name: --subnet-address-prefix
    defaultValue: 10.0.0.0/24
    summary: The subnet IP address prefix to use when creating a new VNet in CIDR format.
  - name: --vnet-address-prefix
    defaultValue: 10.0.0.0/16
    summary: The IP address prefix to use when creating a new VNet in CIDR format.
  - name: --vnet-name
    summary: Name of the virtual network when creating a new one or referencing an existing one.
  - name: --data-disk-caching
    parameterValueGroup: None, ReadOnly, ReadWrite
    summary: Storage caching type for the VM data disk(s).
  - name: --data-disk-sizes-gb
    summary: Space separated empty managed data disk sizes in GB to create.
  - name: --os-disk-caching --storage-caching
    parameterValueGroup: ReadOnly, ReadWrite
    summary: Storage caching type for the VM OS disk.
  - name: --os-disk-name
    summary: The name of the new VM OS disk.
  - name: --os-type
    parameterValueGroup: linux, windows
    summary: Type of OS installed on a custom VHD. Do not use when specifying an URN or URN alias.
  - name: --storage-account
    summary: Only applicable when use with '--use-unmanaged-disk'. The name to use when creating a new storage account or referencing an existing one. If omitted, an appropriate storage account in the same resource group and location will be used, or a new one will be created.
  - name: --storage-container-name
    summary: "Only applicable when use with '--use-unmanaged-disk'. Name of the storage container for the VM OS disk. Default: vhds."
  - name: --storage-sku
    parameterValueGroup: Premium_LRS, Standard_GRS, Standard_LRS, Standard_RAGRS, Standard_ZRS
    summary: The sku of storage account to persist VM. By default, only Standard_LRS and Premium_LRS are allowed. Using with --use-unmanaged-disk, all are available.
  - name: --use-unmanaged-disk
    summary: Do not use managed disk to persist VM.
  source:
    path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
    remote:
      branch: master
      path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
      repo: https://github.com/Azure/azure-cli.git
- uid: az_vm_deallocate
  name: az vm deallocate
  summary: Shuts down the virtual machine and releases the compute resources.
  langs:
  - azurecli
  examples:
  - summary: Process to deallocate, generalize, and capture a stopped virtual machine
    syntax:
      content: >-
        az vm deallocate -g MyResourceGroup -n MyVm
                                az vm generalize -g MyResourceGroup -n MyVm
                                az vm capture -g MyResourceGroup -n MyVm --vhd-name-prefix MyPrefix
  - summary: The process to deallocate, generalize, and capture multiple stopped virtual machines.
    syntax:
      content: >-
        vms_ids=$(az vm list -g MyResourceGroup --query "[].id" -o tsv)
                                az vm deallocate --ids ${vms_ids}
                                az vm generalize --ids ${vms_ids}
                                az vm capture --ids ${vms_ids} --vhd-name-prefix MyPrefix
  parameters:
  - isRequired: true
    name: --name -n
    summary: The name of the Virtual Machine. You can configure the default using az configure --defaults vm=<name>.
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using az configure --defaults group=<name>.
  - name: --no-wait
    summary: Do not wait for the long running operation to finish.
  source:
    path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
    remote:
      branch: master
      path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
      repo: https://github.com/Azure/azure-cli.git
- uid: az_vm_delete
  name: az vm delete
  summary: The operation to delete a virtual machine.
  langs:
  - azurecli
  examples:
  - summary: Delete a VM without a prompt for confirmation.
    syntax:
      content: az vm delete -g MyResourceGroup -n MyVm --yes
  - summary: Delete a virtual machine by Ids
    syntax:
      content: az vm delete --ids $(az vm list -g MyResourceGroup --query "[].id" -o tsv)
  parameters:
  - isRequired: true
    name: --name -n
    summary: The name of the Virtual Machine. You can configure the default using az configure --defaults vm=<name>.
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using az configure --defaults group=<name>.
  - name: --no-wait
    summary: Do not wait for the long running operation to finish.
  - name: --yes -y
    summary: Do not prompt for confirmation.
  source:
    path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
    remote:
      branch: master
      path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
      repo: https://github.com/Azure/azure-cli.git
- uid: az_vm_format_secret
  name: az vm format-secret
  summary: Format secrets to be used in az vm create --secrets.
  langs:
  - azurecli
  examples:
  - summary: Create a self-signed certificate with a the default policy and add to a virtual machine
    syntax:
      content: "az keyvault certificate create --vault-name vaultname -n cert1   -p \"$(az keyvault certificate get-default-policy)\"\n                        \n                        secrets=$(az keyvault secret list-versions --vault-name vaultname   -n cert1 --query \"[?attributes.enabled].id\" -o tsv)\n                        \n                        vm_secrets=$(az vm format-secret -s \"$secrets\") \n                        \n                        az vm create -g group-name -n vm-name --admin-username deploy    --image debian --secrets \"$vm_secrets\""
  parameters:
  - isRequired: true
    name: --secrets -s
    summary: Space separated list of Key Vault secret URIs. Perhaps, produced by 'az keyvault secret list-versions --vault-name vaultname -n cert1 --query "[?attributes.enabled].id" -o tsv'.
  - name: --certificate-store
    summary: Certificate store the secret will be applied (Windows only).
  source:
    path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
    remote:
      branch: master
      path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
      repo: https://github.com/Azure/azure-cli.git
- uid: az_vm_generalize
  name: az vm generalize
  summary: Sets the state of the virtual machine to generalized.
  langs:
  - azurecli
  examples:
  - summary: Process to deallocate, generalize, and capture a stopped virtual machine
    syntax:
      content: >-
        az vm deallocate -g MyResourceGroup -n MyVm
                                az vm generalize -g MyResourceGroup -n MyVm
                                az vm capture -g MyResourceGroup -n MyVm --vhd-name-prefix MyPrefix
  - summary: The process to deallocate, generalize, and capture multiple stopped virtual machines.
    syntax:
      content: >-
        vms_ids=$(az vm list -g MyResourceGroup --query "[].id" -o tsv)
                                az vm deallocate --ids ${vms_ids}
                                az vm generalize --ids ${vms_ids}
                                az vm capture --ids ${vms_ids} --vhd-name-prefix MyPrefix
  parameters:
  - isRequired: true
    name: --name -n
    summary: The name of the Virtual Machine. You can configure the default using az configure --defaults vm=<name>.
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using az configure --defaults group=<name>.
  - name: --no-wait
    summary: Do not wait for the long running operation to finish.
  source:
    path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
    remote:
      branch: master
      path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
      repo: https://github.com/Azure/azure-cli.git
- uid: az_vm_get_instance_view
  name: az vm get-instance-view
  summary: Get information about a VM including instance information (powerState).
  langs:
  - azurecli
  examples:
  - summary: Use resource group and name to get instance view information of a VM.
    syntax:
      content: az vm get-instance-view -g MyResourceGroup -n MyVm
  - summary: Get instance view by Ids
    syntax:
      content: az vm get-instance-view --ids $(az vm list -g MyResourceGroup --query "[].id" -o tsv)
  parameters:
  - isRequired: true
    name: --name -n
    summary: The name of the Virtual Machine. You can configure the default using az configure --defaults vm=<name>.
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using az configure --defaults group=<name>.
  source:
    path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
    remote:
      branch: master
      path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
      repo: https://github.com/Azure/azure-cli.git
- uid: az_vm_list
  name: az vm list
  summary: List information about Virtual Machines.
  langs:
  - azurecli
  examples:
  - summary: List all VMs.
    syntax:
      content: az vm list
  - summary: List all VMs by resource group.
    syntax:
      content: az vm list -g MyResourceGroup
  - summary: List all VMs by resource group with details.
    syntax:
      content: az vm list -g MyResourceGroup -d
  parameters:
  - name: --resource-group -g
    summary: Name of resource group. You can configure the default group using az configure --defaults group=<name>.
  - name: --show-details -d
    summary: Show public ip address, FQDN, and power states. command will run slow.
  source:
    path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
    remote:
      branch: master
      path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
      repo: https://github.com/Azure/azure-cli.git
- uid: az_vm_list_ip_addresses
  name: az vm list-ip-addresses
  summary: Get IP addresses from one or more Virtual Machines.
  langs:
  - azurecli
  examples:
  - summary: Get the IP addresses for a VM.
    syntax:
      content: az vm list-ip-addresses -g MyResourceGroup -n MyVm
  - summary: Get IP addresses for VMs by Ids
    syntax:
      content: az vm list-ip-addresses --ids $(az vm list -g MyResourceGroup --query "[].id" -o tsv)
  parameters:
  - name: --name -n
    summary: The name of the Virtual Machine. You can configure the default using az configure --defaults vm=<name>.
  - name: --resource-group -g
    summary: Name of resource group. You can configure the default group using az configure --defaults group=<name>.
  source:
    path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
    remote:
      branch: master
      path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
      repo: https://github.com/Azure/azure-cli.git
- uid: az_vm_list_sizes
  name: az vm list-sizes
  summary: Lists all available virtual machine sizes for a subscription in a location.
  langs:
  - azurecli
  examples:
  - summary: List the available VM sizes in West US.
    syntax:
      content: az vm list-sizes -l westus
  parameters:
  - isRequired: true
    name: --location -l
    summary: Location. You can configure the default location using az configure --defaults location=<location>.
  source:
    path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
    remote:
      branch: master
      path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
      repo: https://github.com/Azure/azure-cli.git
- uid: az_vm_list_usage
  name: az vm list-usage
  summary: Gets, for the specified location, the current compute resource usage information as well as the limits for compute resources under the subscription.
  langs:
  - azurecli
  examples:
  - summary: Get the compute resource usage for West US.
    syntax:
      content: az vm list-usage -l westus
  parameters:
  - isRequired: true
    name: --location -l
    summary: Location. You can configure the default location using az configure --defaults location=<location>.
  source:
    path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
    remote:
      branch: master
      path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
      repo: https://github.com/Azure/azure-cli.git
- uid: az_vm_list_vm_resize_options
  name: az vm list-vm-resize-options
  summary: Lists all available virtual machine sizes to which the specified virtual machine can be resized.
  langs:
  - azurecli
  examples:
  - summary: List all available VM sizes for resizing.
    syntax:
      content: az vm list-vm-resize-options -g MyResourceGroup -n MyVm
  - summary: List all available VM sizes for resizing by VM Ids
    syntax:
      content: az vm list-vm-resize-options --ids $(az vm list -g MyResourceGroup --query "[].id" -o tsv)
  parameters:
  - isRequired: true
    name: --name -n
    summary: The name of the Virtual Machine. You can configure the default using az configure --defaults vm=<name>.
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using az configure --defaults group=<name>.
  source:
    path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
    remote:
      branch: master
      path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
      repo: https://github.com/Azure/azure-cli.git
- uid: az_vm_open_port
  name: az vm open-port
  summary: Opens a VM to inbound traffic on specified ports by adding a security rule to the network security group (NSG) that is attached to the VM's network interface (NIC) or subnet.
  langs:
  - azurecli
  examples:
  - summary: Open all ports on a VM to inbound traffic.
    syntax:
      content: az vm open-port -g MyResourceGroup -n MyVm --port *
  - summary: Open a range of ports on a VM to inbound traffic with the highest priority.
    syntax:
      content: az vm open-port -g MyResourceGroup -n MyVm --port 80-100 --priority 100
  - summary: Open all ports for multiple VMs by Ids
    syntax:
      content: az vm open-port --ids $(az vm list -g MyResourceGroup --query "[].id" -o tsv)
  parameters:
  - isRequired: true
    name: --name -n
    summary: The name of the virtual machine to open inbound traffic on.
  - isRequired: true
    name: --port
    summary: "The port or port range (ex: 80-100) to open inbound traffic to. Use '*' to allow traffic to all ports."
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using az configure --defaults group=<name>.
  - name: --apply-to-subnet
    summary: Allow inbound traffic on the subnet instead of the NIC.
  - name: --nsg-name
    summary: The name of the network security group to create if one does not exist. Ignored if an NSG already exists.
  - name: --priority
    defaultValue: "900"
    summary: Rule priority, between 100 (highest priority) and 4096 (lowest priority). Must be unique for each rule in the collection.
  source:
    path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
    remote:
      branch: master
      path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
      repo: https://github.com/Azure/azure-cli.git
- uid: az_vm_redeploy
  name: az vm redeploy
  summary: The operation to redeploy a virtual machine.
  langs:
  - azurecli
  examples:
  - summary: Redeploy a VM.
    syntax:
      content: az vm redeploy -g MyResourceGroup -n MyVm
  - summary: Redeploy VMs by VM Ids
    syntax:
      content: az vm redeploy --ids $(az vm list -g MyResourceGroup --query "[].id" -o tsv)
  parameters:
  - isRequired: true
    name: --name -n
    summary: The name of the Virtual Machine. You can configure the default using az configure --defaults vm=<name>.
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using az configure --defaults group=<name>.
  - name: --no-wait
    summary: Do not wait for the long running operation to finish.
  source:
    path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
    remote:
      branch: master
      path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
      repo: https://github.com/Azure/azure-cli.git
- uid: az_vm_resize
  name: az vm resize
  summary: Update VM size.
  langs:
  - azurecli
  examples:
  - summary: Resize a VM.
    syntax:
      content: az vm resize -g MyResourceGroup -n MyVm --size Standard_DS3_v2
  - summary: Resize VMs by VM Ids
    syntax:
      content: az vm resize --size Standard_DS3_v2 --ids $(az vm list -g MyResourceGroup --query "[].id" -o tsv)
  parameters:
  - isRequired: true
    name: --name -n
    summary: The name of the Virtual Machine. You can configure the default using az configure --defaults vm=<name>.
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using az configure --defaults group=<name>.
  - isRequired: true
    name: --size
    summary: Sizes such as Standard_A4, Standard_F4s, etc.
  - name: --no-wait
    summary: Do not wait for the long running operation to finish.
  source:
    path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
    remote:
      branch: master
      path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
      repo: https://github.com/Azure/azure-cli.git
- uid: az_vm_restart
  name: az vm restart
  summary: The operation to restart a virtual machine.
  langs:
  - azurecli
  examples:
  - summary: Restart a VM.
    syntax:
      content: az vm restart -g MyResourceGroup -n MyVm
  - summary: Restart VM by by VM Ids
    syntax:
      content: az vm restart --ids $(az vm list -g MyResourceGroup --query "[].id" -o tsv)
  parameters:
  - isRequired: true
    name: --name -n
    summary: The name of the Virtual Machine. You can configure the default using az configure --defaults vm=<name>.
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using az configure --defaults group=<name>.
  - name: --no-wait
    summary: Do not wait for the long running operation to finish.
  source:
    path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
    remote:
      branch: master
      path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
      repo: https://github.com/Azure/azure-cli.git
- uid: az_vm_show
  name: az vm show
  summary: Show details of a VM.
  langs:
  - azurecli
  examples:
  - summary: Show information about a VM.
    syntax:
      content: az vm show -g MyResourceGroup -n MyVm -d
  - summary: Show VM details by by VM Ids
    syntax:
      content: az vm show -d --ids $(az vm list -g MyResourceGroup --query "[].id" -o tsv)
  parameters:
  - isRequired: true
    name: --name -n
    summary: The name of the Virtual Machine. You can configure the default using az configure --defaults vm=<name>.
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using az configure --defaults group=<name>.
  - name: --show-details -d
    summary: Show public ip address, FQDN, and power states. command will run slow.
  source:
    path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
    remote:
      branch: master
      path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
      repo: https://github.com/Azure/azure-cli.git
- uid: az_vm_start
  name: az vm start
  summary: The operation to start a virtual machine.
  langs:
  - azurecli
  examples:
  - summary: Start a stopped VM.
    syntax:
      content: az vm start -g MyResourceGroup -n MyVm
  - summary: Start stopped VMs by by VM Ids
    syntax:
      content: az vm start --ids $(az vm list -g MyResourceGroup --query "[].id" -o tsv)
  parameters:
  - isRequired: true
    name: --name -n
    summary: The name of the Virtual Machine. You can configure the default using az configure --defaults vm=<name>.
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using az configure --defaults group=<name>.
  - name: --no-wait
    summary: Do not wait for the long running operation to finish.
  source:
    path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
    remote:
      branch: master
      path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
      repo: https://github.com/Azure/azure-cli.git
- uid: az_vm_stop
  name: az vm stop
  summary: The operation to power off (stop) a virtual machine.
  langs:
  - azurecli
  examples:
  - summary: Stop a running VM.
    syntax:
      content: az vm stop -g MyResourceGroup -n MyVm
  - summary: Stop running VMs by by VM Ids
    syntax:
      content: az vm stop --ids $(az vm list -g MyResourceGroup --query "[].id" -o tsv)
  parameters:
  - isRequired: true
    name: --name -n
    summary: The name of the Virtual Machine. You can configure the default using az configure --defaults vm=<name>.
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using az configure --defaults group=<name>.
  - name: --no-wait
    summary: Do not wait for the long running operation to finish.
  source:
    path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
    remote:
      branch: master
      path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
      repo: https://github.com/Azure/azure-cli.git
- uid: az_vm_update
  name: az vm update
  summary: Update the properties of a VM.
  langs:
  - azurecli
  examples:
  - summary: Add or update a tag.
    syntax:
      content: az <command> -n name -g group --set tags.tagName=tagValue
  - summary: Remove a tag.
    syntax:
      content: az <command> -n name -g group --remove tags.tagName
  - summary: Set the primary NIC of a VM.
    syntax:
      content: az <command> -n name -g group --set networkProfile.networkInterfaces[1].primary=false networkProfile.networkInterfaces[0].primary=true
  - summary: Add a new non-primary NIC to a VM.
    syntax:
      content: az <command> -n name -g group --add networkProfile.networkInterfaces primary=false id=<NIC_ID>
  - summary: Remove the fourth NIC from a VM.
    syntax:
      content: az <command> -n name -g group --remove networkProfile.networkInterfaces 3
  parameters:
  - isRequired: true
    name: --name -n
    summary: The name of the Virtual Machine. You can configure the default using az configure --defaults vm=<name>.
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using az configure --defaults group=<name>.
  - name: --no-wait
    summary: Do not wait for the long running operation to finish.
  - name: --add
    summary: 'Add an object to a list of objects by specifying a path and key value pairs.  Example: --add property.listProperty <key=value, string or JSON string>.'
  - name: --remove
    summary: 'Remove a property or an element from a list.  Example: --remove property.list <indexToRemove> OR --remove propertyToRemove.'
  - name: --set
    summary: 'Update an object by specifying a property path and value to set.  Example: --set property1.property2=<value>.'
  source:
    path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
    remote:
      branch: master
      path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
      repo: https://github.com/Azure/azure-cli.git
- uid: az_vm_wait
  name: az vm wait
  summary: Place the CLI in a waiting state until a condition of the VM is met.
  langs:
  - azurecli
  examples:
  - summary: Wait until the VM is created.
    syntax:
      content: az vm wait -g MyResourceGroup -n MyVm --created
  - summary: Wait until VMs are deleted by Ids
    syntax:
      content: az vm wait --deleted --ids $(az vm list -g MyResourceGroup --query "[].id" -o tsv)
  parameters:
  - isRequired: true
    name: --name -n
    summary: The name of the Virtual Machine. You can configure the default using az configure --defaults vm=<name>.
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using az configure --defaults group=<name>.
  - name: --created
    summary: Wait till created with 'provisioningState' at 'Succeeded'.
  - name: --custom
    summary: Wait until the condition satisfies a custom JMESPath query. E.g. provisioningState!='InProgress', instanceView.statuses[?code=='PowerState/running'].
  - name: --deleted
    summary: Wait till deleted.
  - name: --exists
    summary: Wait till the resource exists.
  - name: --interval
    defaultValue: "30"
    summary: Polling interval in seconds.
  - name: --timeout
    defaultValue: "3600"
    summary: Maximum wait in seconds.
  - name: --updated
    summary: Wait till updated with provisioningState at 'Succeeded'.
  source:
    path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
    remote:
      branch: master
      path: src/command_modules/azure-cli-vm/azure/cli/command_modules/vm/_help.py
      repo: https://github.com/Azure/azure-cli.git
commands:
- uid: az_vm_assign_identity
  name: az vm assign-identity
  summary: Enable managed service identity on a VM.
- uid: az_vm_availability_set
  name: az vm availability-set
  summary: Group resources into availability sets for high-availability requirements.
- uid: az_vm_availability_set_create
  name: az vm availability-set create
  summary: Create an Azure Availability Set.
- uid: az_vm_availability_set_delete
  name: az vm availability-set delete
  summary: Delete an availability set.
- uid: az_vm_availability_set_list
  name: az vm availability-set list
  summary: Lists all availability sets in a resource group.
- uid: az_vm_availability_set_list_sizes
  name: az vm availability-set list-sizes
  summary: Lists all available virtual machine sizes that can be used to create a new virtual machine in an existing availability set.
- uid: az_vm_availability_set_show
  name: az vm availability-set show
  summary: Retrieves information about an availability set.
- uid: az_vm_availability_set_update
  name: az vm availability-set update
  summary: Update an Azure Availability Set.
- uid: az_vm_boot_diagnostics
  name: az vm boot-diagnostics
  summary: Troubleshoot the start up of an Azure Virtual Machine.
- uid: az_vm_boot_diagnostics_disable
  name: az vm boot-diagnostics disable
  summary: Disable the boot diagnostics on a VM.
- uid: az_vm_boot_diagnostics_enable
  name: az vm boot-diagnostics enable
  summary: Enable the boot diagnostics on a VM.
- uid: az_vm_boot_diagnostics_get_boot_log
  name: az vm boot-diagnostics get-boot-log
  summary: Get the boot diagnostics log from a VM.
- uid: az_vm_capture
  name: az vm capture
  summary: Captures the VM by copying virtual hard disks of the VM and outputs a template that can be used to create similar VMs.
- uid: az_vm_create
  name: az vm create
  summary: Create an Azure Virtual Machine.
- uid: az_vm_deallocate
  name: az vm deallocate
  summary: Shuts down the virtual machine and releases the compute resources.
- uid: az_vm_delete
  name: az vm delete
  summary: The operation to delete a virtual machine.
- uid: az_vm_diagnostics
  name: az vm diagnostics
  summary: Configure the Azure Virtual Machine diagnostics extension.
- uid: az_vm_diagnostics_get_default_config
  name: az vm diagnostics get-default-config
  summary: Show the default config file which defines data to be collected.
- uid: az_vm_diagnostics_set
  name: az vm diagnostics set
  summary: Configure the Azure VM diagnostics extension.
- uid: az_vm_disk
  name: az vm disk
  summary: Manage the managed data disks attached to a VM.
- uid: az_vm_disk_attach
  name: az vm disk attach
  summary: Attach a managed disk.
- uid: az_vm_disk_detach
  name: az vm disk detach
  summary: ''
- uid: az_vm_extension
  name: az vm extension
  summary: Extend the functionality of your VMs with extensions.
- uid: az_vm_extension_delete
  name: az vm extension delete
  summary: The operation to delete the extension.
- uid: az_vm_extension_image
  name: az vm extension image
  summary: Find the available VM extensions for your subscription and region.
- uid: az_vm_extension_image_list
  name: az vm extension image list
  summary: Vm extension image list.
- uid: az_vm_extension_image_list_names
  name: az vm extension image list-names
  summary: Gets a list of virtual machine extension image types.
- uid: az_vm_extension_image_list_versions
  name: az vm extension image list-versions
  summary: Gets a list of virtual machine extension image versions.
- uid: az_vm_extension_image_show
  name: az vm extension image show
  summary: Gets a virtual machine extension image.
- uid: az_vm_extension_list
  name: az vm extension list
  summary: List the extensions attached to a VM in a resource group.
- uid: az_vm_extension_set
  name: az vm extension set
  summary: Create/update extensions for a VM in a resource group.
- uid: az_vm_extension_show
  name: az vm extension show
  summary: The operation to get the extension.
- uid: az_vm_format_secret
  name: az vm format-secret
  summary: Format secrets to be used in az vm create --secrets.
- uid: az_vm_generalize
  name: az vm generalize
  summary: Sets the state of the virtual machine to generalized.
- uid: az_vm_get_instance_view
  name: az vm get-instance-view
  summary: Get information about a VM including instance information (powerState).
- uid: az_vm_image
  name: az vm image
  summary: Virtual machine images that are available in the Azure Marketplace.
- uid: az_vm_image_list
  name: az vm image list
  summary: List the VM/VMSS images available in the Azure Marketplace.
- uid: az_vm_image_list_offers
  name: az vm image list-offers
  summary: List the VM image offers available in the Azure Marketplace.
- uid: az_vm_image_list_publishers
  name: az vm image list-publishers
  summary: List the VM image publishers available in the Azure Marketplace.
- uid: az_vm_image_list_skus
  name: az vm image list-skus
  summary: List the VM image skus available in the Azure Marketplace.
- uid: az_vm_image_show
  name: az vm image show
  summary: Show a VM image available in the Azure Marketplace.
- uid: az_vm_list
  name: az vm list
  summary: List information about Virtual Machines.
- uid: az_vm_list_ip_addresses
  name: az vm list-ip-addresses
  summary: Get IP addresses from one or more Virtual Machines.
- uid: az_vm_list_sizes
  name: az vm list-sizes
  summary: Lists all available virtual machine sizes for a subscription in a location.
- uid: az_vm_list_usage
  name: az vm list-usage
  summary: Gets, for the specified location, the current compute resource usage information as well as the limits for compute resources under the subscription.
- uid: az_vm_list_vm_resize_options
  name: az vm list-vm-resize-options
  summary: Lists all available virtual machine sizes to which the specified virtual machine can be resized.
- uid: az_vm_nic
  name: az vm nic
  summary: Manage network interfaces, see also 'az network nic'.
- uid: az_vm_nic_add
  name: az vm nic add
  summary: Add network interface configurations to the virtual machine.
- uid: az_vm_nic_list
  name: az vm nic list
  summary: List network interface configurations attached to a virtual machine.
- uid: az_vm_nic_remove
  name: az vm nic remove
  summary: Remove network interface configurations from the virtual machine.
- uid: az_vm_nic_set
  name: az vm nic set
  summary: Replace existing network interface configurations on the virtual machine.
- uid: az_vm_nic_show
  name: az vm nic show
  summary: Show details of a network interface configuration attached to a virtual machine.
- uid: az_vm_open_port
  name: az vm open-port
  summary: Opens a VM to inbound traffic on specified ports by adding a security rule to the network security group (NSG) that is attached to the VM's network interface (NIC) or subnet.
- uid: az_vm_redeploy
  name: az vm redeploy
  summary: The operation to redeploy a virtual machine.
- uid: az_vm_resize
  name: az vm resize
  summary: Update VM size.
- uid: az_vm_restart
  name: az vm restart
  summary: The operation to restart a virtual machine.
- uid: az_vm_show
  name: az vm show
  summary: Show details of a VM.
- uid: az_vm_start
  name: az vm start
  summary: The operation to start a virtual machine.
- uid: az_vm_stop
  name: az vm stop
  summary: The operation to power off (stop) a virtual machine.
- uid: az_vm_unmanaged_disk
  name: az vm unmanaged-disk
  summary: Manage the unmanaged data disks attached to a VM.
- uid: az_vm_unmanaged_disk_attach
  name: az vm unmanaged-disk attach
  summary: Attach an unmanaged disk.
- uid: az_vm_unmanaged_disk_detach
  name: az vm unmanaged-disk detach
  summary: ''
- uid: az_vm_unmanaged_disk_list
  name: az vm unmanaged-disk list
  summary: List disks for a Virtual Machine.
- uid: az_vm_update
  name: az vm update
  summary: Update the properties of a VM.
- uid: az_vm_user
  name: az vm user
  summary: Manage a user account on a VM.
- uid: az_vm_user_delete
  name: az vm user delete
  summary: Remove a user(not supported on Windows VM).
- uid: az_vm_user_reset_ssh
  name: az vm user reset-ssh
  summary: Reset the SSH configuration on a VM.
- uid: az_vm_user_update
  name: az vm user update
  summary: Update or Add(only on Linux VM) users.
- uid: az_vm_wait
  name: az vm wait
  summary: Place the CLI in a waiting state until a condition of the VM is met.
globalParameters:
- name: --debug
  summary: Increase logging verbosity to show all debug logs.
- name: --help -h
  summary: Show this help message and exit.
- name: --output -o
  defaultValue: json
  parameterValueGroup: json, jsonc, table, tsv
  summary: Output format.
- name: --query
  summary: JMESPath query string. See <a href="http://jmespath.org/">http://jmespath.org/</a> for more information and examples.
- name: --verbose
  summary: Increase logging verbosity. Use --debug for full debug logs.
